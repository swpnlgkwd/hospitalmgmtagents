<!-- Floating Chat Button -->
<div class="chat-button" (click)="toggleChat()">ðŸ’¬</div>

<!-- Chat Window -->
<div class="chat-window" *ngIf="showChat">
    <div class="chat-header flex items-center justify-between px-4 py-2 bg-blue-600 text-white rounded-t-2xl shadow-md">
        <span class="text-lg font-semibold">ShiftGenie <span class="text-sm font-normal opacity-80">â€“ Your Wish,
                Scheduled</span></span>

        <button class="close-btn" (click)="toggleChat()"
            class="text-white text-2xl leading-none hover:text-red-300 transition-all duration-200">Ã—</button>
    </div>


    <!-- Chat Messages -->
    <div class="chat-messages" #chatContainer>
        <div *ngFor="let message of messages" class="chat-row" [ngClass]="{
        'user-message': message.sender === 'User',
        'agent-message': message.sender === 'Agent'
      }">
            <ng-container *ngIf="message.sender === 'Agent'">
                <div class="avatar">ðŸ¤–</div>
                <div class="message-bubble">{{ message.text }}</div>
            </ng-container>
            <ng-container *ngIf="message.sender === 'User'">
                <div class="avatar user-avatar">ðŸ§‘</div>
                <div class="message-bubble">{{ message.text }}</div>
            </ng-container>
        </div>

        <div class="typing-indicator" *ngIf="isWaiting">
            <span class="shiftgenie-label">ShiftGenie is thinking</span>
            <span class="dot-loader">
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
            </span>
        </div>
    </div>

    <!-- Chat Input -->
<div class="chat-input">
  <input
    type="text"
    [(ngModel)]="messageText"
    (keyup.enter)="sendMessage()"
    [disabled]="isWaiting"
    placeholder="Type your message..."
  />
  <button
    class="send-button"
    (click)="sendMessage()"
    [disabled]="isWaiting || !messageText.trim()"
    aria-label="Send message"
  >
    <span *ngIf="!isWaiting">ðŸ“¨</span>
    <span *ngIf="isWaiting" class="loader"></span>
  </button>
</div>

</div>